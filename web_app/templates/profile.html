{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞{% endblock %}

{% block content %}
<div class="card shadow-sm mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h2 class="card-title">–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
        <p><strong>Telegram ID:</strong> {{ user.telegram_id }}</p>
        <p><strong>–ü–æ–≤–Ω–µ —ñ–º‚Äô—è:</strong> {{ user.full_name }}</p>
        <p><strong>Username:</strong> @{{ user.telegram_username }}</p>
        <p>
            <strong>–°—Ç–∞—Ç—É—Å:</strong>
            {% if user.is_verified %}‚úÖ –í–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π {% else %}‚ùå –ù–µ –≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π{% endif %}
            /
            {% if user.is_active %}üü¢ –ê–∫—Ç–∏–≤–Ω–∏–π{% else %}üî¥ –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π{% endif %}
        </p>
        <a class="btn btn-primary" href="/training-sessions?telegram_id={{ user.telegram_id }}">–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</a>
        <a class="btn btn-secondary" href="/morning-quiz?telegram_id={{ user.telegram_id }}">–†–∞–Ω–∫–æ–≤—ñ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</a>
        <a class="btn btn-success" href="/statistics?telegram_id={{ user.telegram_id }}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
        <a class="btn btn-warning" href="/notifications?telegram_id={{ user.telegram_id }}">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</a>


        <h3>Training file</h3>

        <div class="mb-4">
        {% if user.training_file_url %}
            <div class="alert alert-success d-flex justify-content-between align-items-center">
            <div>
                <strong>‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ:</strong>
                <a href="{{ user.training_file_url }}" target="_blank" class="ms-2">
                {{ user.training_file_url.split('/')[-1] }}
                </a>
            </div>
            <button class="btn btn-outline-dark btn-sm"
                    onclick="navigator.clipboard.writeText(window.location.origin + '{{ user.training_file_url }}')">
            üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
            </button>
            </div>
        {% else %}
            <div class="alert alert-warning">
            üö´ –§–∞–π–ª —â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ.
            </div>
        {% endif %}

        <form action="/upload-training-file?user_telegram_id={{ user.telegram_id }}" method="post" enctype="multipart/form-data" class="mt-3">
            <div class="mb-3">
            <label for="file" class="form-label">–í–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</label>
            <input type="file" name="file" id="file" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª</button>
        </form>
        </div>

    </div>
</div>
{% endblock %}

